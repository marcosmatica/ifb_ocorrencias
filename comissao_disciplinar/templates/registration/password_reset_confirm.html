{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nova Senha - Sistema de Ocorrências</title>
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
</head>
<body style="background: linear-gradient(135deg, #006633 0%, #00994d 100%); min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 1rem;">
    <div class="card" style="max-width: 450px; width: 100%; box-shadow: var(--shadow-xl);">
        <div style="padding: 2rem; text-align: center; border-bottom: 1px solid var(--gray-200);">
            <div style="width: 80px; height: 80px; margin: 0 auto 1rem; background: var(--ifb-verde); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                <svg width="40" height="40" fill="white" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
                </svg>
            </div>
            <h1 style="font-size: 1.5rem; font-weight: 700; color: var(--gray-900); margin-bottom: 0.5rem;">
                Nova Senha
            </h1>
            <p style="color: var(--gray-600); font-size: 0.875rem;">
                Digite sua nova senha nos campos abaixo
            </p>
        </div>

        <div class="card-body" style="padding: 2rem;">
            {% if validlink %}
            <form method="post">
                {% csrf_token %}

                <div class="form-group">
                    <label class="form-label">Nova Senha</label>
                    <input type="password" name="new_password1" class="form-control" placeholder="Digite a nova senha" required>
                    {% if form.new_password1.errors %}
                    <div class="form-error">{{ form.new_password1.errors }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label class="form-label">Confirmar Nova Senha</label>
                    <input type="password" name="new_password2" class="form-control" placeholder="Confirme a nova senha" required>
                    {% if form.new_password2.errors %}
                    <div class="form-error">{{ form.new_password2.errors }}</div>
                    {% endif %}
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%; padding: 0.75rem; font-size: 1rem; font-weight: 600;">
                    Alterar Senha
                </button>
            </form>
            {% else %}
            <div class="alert alert-danger">
                <strong>Link inválido</strong>
                <p style="margin-top: 0.5rem;">Este link de redefinição de senha já foi utilizado ou expirou.</p>
            </div>
            <a href="{% url 'password_reset' %}" class="btn btn-primary" style="width: 100%;">
                Solicitar novo link
            </a>
            {% endif %}

            <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--gray-200); text-align: center;">
                <a href="{% url 'login' %}" style="color: var(--ifb-verde); font-size: 0.875rem; text-decoration: none;">
                    ← Voltar para o login
                </a>
            </div>
        </div>
    </div>
</body>
</html>